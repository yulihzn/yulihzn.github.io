System.register("chunks:///_virtual/Actor.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TransformComponent.ts","./ActorData.ts","./GlobalConstant.ts","./AnimSprite.ts","./AnimSpriteData.ts","./AsyncAStar.ts","./EnumData.ts","./DamageData.ts","./RoundAnimManager.ts"],(function(t){var i,a,e,n,r,s,o,h,d,u,l,c,m,p,f,g,y,v;return{setters:[function(t){i=t.inheritsLoose,a=t.createForOfIteratorHelperLoose,e=t.createClass},function(t){n=t.cclegacy,r=t._decorator,s=t.v3,o=t.log,h=t.tween,d=t.Sprite},function(t){u=t.TransformComponent},function(t){l=t.default},function(t){c=t.default},function(t){m=t.AnimSprite},function(t){p=t.default},function(t){f=t.AsyncAStar},function(t){g=t.RoundStatus},function(t){y=t.default},function(t){v=t.default}],execute:function(){var S,A;n._RF.push({},"5059aBNDQdFuKClexXWbd7z","Actor",void 0);var E=r.ccclass;r.property,t("Actor",E("Actor")(((A=function(t){function n(){for(var i,a=arguments.length,e=new Array(a),n=0;n<a;n++)e[n]=arguments[n];return(i=t.call.apply(t,[this].concat(e))||this).animSprite=void 0,i._sprite=void 0,i._astar=void 0,i.gameWorld=void 0,i.data=new l,i.isRoundOver=!0,i.roundStatus=g.END,i.controller=void 0,i.animClipList=[],i.isWaitAnim=!1,i}i(n,t);var r=n.prototype;return r.onLoad=function(){this.node.setScale(s(1,0))},r.init=function(t,i,a,e,n,r,s){this.data.valueCopy(i),this.data.id=a,this.gameWorld=t,n.actor=this,this.controller=n,this.gameWorld.actorLayer.addChild(this.node),this.animSprite=this.sprite.addComponent(m),this.animSprite.init(new p(c.SIZE,c.SIZE,i.res,i.isResAuto),!0),this.setInWaterMat(this.sprite,r&&!i.isFly,s),this.setPos(e,!0)},r.setInWaterMat=function(t,i,a){if(t&&t.spriteFrame){t.spriteFrame.rect,t.spriteFrame.texture;a||!i?t.getMaterialInstance(0).setProperty("hidebottom",i?1:0):t.getSharedMaterial(0).setProperty("hidebottom",i?1:0)}},r.search=function(t,i,a){this.astar.search(this.astar.graph.grid[t.x][t.y],this.astar.graph.grid[i.x][i.y],a)},r.roundStart=function(){this.roundStatus==g.END&&(this.roundStatus=g.START,o("roundStart:"+this.data.res+" "+this.data.id),0!=this.data.runtime.health||this.roundEnd())},r.roundEnd=function(){this.roundStatus!=g.END&&(this.roundStatus=g.END,this.gameWorld.actorManager.roundOverCount++,o("roundEnd:"+this.data.res+" "+this.data.id))},r.ctrlMove=function(t){var i=this.gameWorld.actorManager.getActorList(t),e=[];if(i&&i.length>0){for(var n,r=a(i);!(n=r()).done;){var s=n.value;if(this.isMonster&&s.isMonster&&!s.isDied)return void this.roundEnd();var o=new y;o.damage=this.data.common.DamageMin,this.isEnemy(s)&&s.data.runtime.health>0&&s.takeDamage(this,o)>0&&e.push(s)}for(var h,d=!0,u=a(i);!(h=u()).done;){if(h.value.data.runtime.health>0){d=!1;break}}if(e.length>0){this.playAnim(v.buildAttackClip(this,t,d),!0),d&&this.setPos(t,!1);for(var l,c=a(e);!(l=c()).done;){var m=l.value;m.data.runtime.health>0?m.playAnim(v.buildAttackedClip(m),!0):m.playAnim(v.buildDiedClip(m),!0)}this.roundEnd()}else this.move(t)}else this.move(t)},r.move=function(t){this.playAnim(v.buildMoveClip(this,t),this.isPlayer),this.setPos(t,!1),this.roundEnd()},r.setPos=function(t,i){if(this.gameWorld.actorManager.moveActorToMap(this.gameWorld.actorManager.getActorKey(t.x,t.y),this),this.data.pos=t,i){var a=s(this.data.pos.x*c.SIZE,this.data.pos.y*c.SIZE);this.node.setPosition(a)}},r.takeDamage=function(t,i){var a=this.data.runtime.health-i.damage;return a<=0?(this.data.runtime.health=0,(this.isBuilding||t.data.runtime.health+1<=t.data.common.maxHealth)&&(t.data.runtime.health+=1)):this.data.runtime.health=a,i.damage},r.playAnim=function(t,i){void 0===i&&(i=!1),i?t.play():this.animClipList.push(t)},r.show=function(){h(this.node).to(.2,{scale:s(1,1)}).start()},r.start=function(){this.show()},r.isEnemy=function(t){return this.isPlayer?!t.isPlayer:t.isPlayer},e(n,[{key:"astar",get:function(){return this._astar||(this._astar=new f(this.gameWorld.graph,{closest:!0,maxIterationTimesInStep:100})),this._astar}},{key:"sprite",get:function(){return this._sprite||(this._sprite=this.node.getChildByName("sprite").getComponent(d)),this._sprite}},{key:"isPlayer",get:function(){return"player"==this.data.name}},{key:"isMonster",get:function(){return this.data.res.indexOf("monster")>=0}},{key:"isBuilding",get:function(){return this.data.res.indexOf("building")>=0}},{key:"isDied",get:function(){return this.data.runtime.health<=0}}]),n}(u)).RES_IDLE000="anim000",A.RES_IDLE001="anim001",S=A))||S);n._RF.pop()}}}));

System.register("chunks:///_virtual/ActorData.ts",["cc","./DataUtils.ts","./CommonData.ts","./RuntimeData.ts"],(function(t){var i,n,s,e,o,u;return{setters:[function(t){i=t.cclegacy,n=t.v3,s=t.Vec3},function(t){e=t.default},function(t){o=t.default},function(t){u=t.default}],execute:function(){i._RF.push({},"068675v3wRE458Uzy/sdlgz","ActorData",void 0);t("default",function(){function t(){this.id=0,this.res="",this.pos=s.ZERO,this.name="",this.isResAuto=!1,this.isStatic=!1,this.isFly=!1,this.common=new o,this.runtime=void 0}var i=t.prototype;return i.valueCopy=function(t){t&&(e.baseCopy(this,t),this.pos=t.pos?n(t.pos.x,t.pos.y):s.ZERO,this.common.valueCopy(t.common),this.runtime?this.runtime.valueCopy(t.runtime):(this.runtime=new u,this.runtime.health=this.common.maxHealth))},i.clone=function(){var i=new t;return i.valueCopy(this),i},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/ActorManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseManager.ts","./Actor.ts","./Utils.ts","./Logic.ts","./LoadingManager.ts","./TileBg.ts","./NonPlayerController.ts","./PlayerController.ts"],(function(t){var r,n,e,a,o,s,i,c,u,h,d,p,l,f,g,v,y,m,x;return{setters:[function(t){r=t.inheritsLoose,n=t.createForOfIteratorHelperLoose,e=t.asyncToGenerator,a=t.createClass,o=t.regeneratorRuntime},function(t){s=t.cclegacy,i=t._decorator,c=t.instantiate,u=t.log,h=t.v3,d=t.Vec3},function(t){p=t.BaseManager},function(t){l=t.Actor},function(t){f=t.default},function(t){g=t.Logic},function(t){v=t.LoadingManager},function(t){y=t.TileBg},function(t){m=t.NonPlayerController},function(t){x=t.PlayerController}],execute:function(){var A,L;s._RF.push({},"c83ddZm1U5B7pqlej2Bmq0v","ActorManager",void 0);var M=i.ccclass;t("ActorManager",M("ActorManager")(((L=function(t){function s(){for(var r,n=arguments.length,e=new Array(n),a=0;a<n;a++)e[a]=arguments[a];return(r=t.call.apply(t,[this].concat(e))||this).actorList=[],r.actorId=0,r.actorMap=new Map,r.roundOverCount=0,r.animStatus=0,r}r(s,t);var i=s.prototype;return i.clear=function(){f.clearComponentArray(this.actorList),this.actorList=new Array,this.actorMap.clear(),this.roundOverCount=0,this.actorId=0},i.hasThe=function(t,r){return!!t&&-1!=t.indexOf(r)},i.isFirstEqual=function(t,r){return!!t&&t[0]==r},i.initBg=function(t){t.bgLayer.getComponent(y).init(t,s.TILE001)},i.addActor=function(){var t=e(o().mark((function t(r,n,e,a,i,h,d,p){var f,y,A;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i){t.next=7;break}return t.next=3,g.loadingManager.loadActorSpriteAtlasSync(a);case 3:if(t.sent!=v.LOAD_FAIL){t.next=7;break}return u(a+"not found"),t.abrupt("return",null);case 7:return t.t0=c,t.next=10,g.getActorPrefab(s.ACTOR);case 10:return t.t1=t.sent,(f=(0,t.t0)(t.t1)).parent=e,y=f.addComponent(l),p?this.actorList.unshift(y):this.actorList.push(y),A=p?y.addComponent(x):y.addComponent(m),y.init(r,g.loadingManager.actorDatas[a],this.actorId++,n,A,h,d),t.abrupt("return",y);case 18:case"end":return t.stop()}}),t,this)})));return function(r,n,e,a,o,s,i,c){return t.apply(this,arguments)}}(),i.getActorKey=function(t,r){return"x="+t+",y="+r},i.getActorList=function(t){var r=this.getActorKey(t.x,t.y);return this.actorMap.has(r)?this.actorMap.get(r):null},i.moveActorToMap=function(t,r){this.actorMap.has(t)||this.actorMap.set(t,[]);var n=this.getActorKey(r.data.pos.x,r.data.pos.y);n!==t&&this.actorMap.has(n)&&this.removeActorFromMapById(n,r.data.id),this.actorMap.get(t).push(r)},i.removeActorFromMapById=function(t,r){if(this.actorMap.has(t)){var n=this.actorMap.get(t),e=n.findIndex((function(t){return t.data.id===r}));-1!==e&&(n.splice(e,1),0===n.length&&this.actorMap.delete(t))}},i.randGrass=function(){var t=e(o().mark((function t(r){var n,e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r.rand.rand()>.7)){t.next=6;break}if(n=h(r.rand.getRandomNum(0,r.data.size.x-1),r.rand.getRandomNum(0,r.data.size.y-1)),e=this.getActorKey(n.x,n.y),this.actorMap.has(e)){t.next=6;break}return t.next=6,this.addGrass(r,h(n.x,n.y));case 6:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}(),i.randNonPlayer=function(){var t=e(o().mark((function t(r,n){var e,a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r.rand.rand()>.5)){t.next=6;break}if(e=h(r.rand.getRandomNum(0,r.data.size.x-1),r.rand.getRandomNum(0,r.data.size.y-1)),a=this.getActorKey(e.x,e.y),this.actorMap.has(a)){t.next=6;break}return t.next=6,this.addNonPlayer(r,h(e.x,e.y),n);case 6:case"end":return t.stop()}}),t,this)})));return function(r,n){return t.apply(this,arguments)}}(),i.addGrass=function(){var t=e(o().mark((function t(r,n){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.getActorKey(n.x,n.y),!this.actorMap.has(e)){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,this.addActor(r,n,r.actorLayer,s.GRASS,!1,!0,!0,!1);case 5:case"end":return t.stop()}}),t,this)})));return function(r,n){return t.apply(this,arguments)}}(),i.addPlayer=function(){var t=e(o().mark((function t(r){var n,e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=h(Math.floor(r.data.size.x/2),Math.floor(r.data.size.y/2)),t.next=3,this.addActor(r,n,r.actorLayer,s.PLAYER,!1,!0,!1,!0);case 3:e=t.sent,r.cameraController.setTarget(e.trans.convertToWorldSpaceAR(d.ZERO),!0);case 5:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}(),i.addTile=function(){var t=e(o().mark((function t(r,n){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.addActor(r,n,r.floorLayer,s.TILE001,!1,!1,!1,!1);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(r,n){return t.apply(this,arguments)}}(),i.addNonPlayer=function(){var t=e(o().mark((function t(r,n,e){var a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=this.getActorKey(n.x,n.y),!this.actorMap.has(a)){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,this.addActor(r,n,r.actorLayer,e,!1,!0,!1,!1);case 5:case"end":return t.stop()}}),t,this)})));return function(r,n,e){return t.apply(this,arguments)}}(),i.roundLoop=function(){var t=this;this.actorList.length>0&&this.roundOverCount<this.actorList.length&&this.actorList[this.roundOverCount].roundStart();if(this.roundOverCount==this.actorList.length&&0==this.animStatus){this.animStatus=1;for(var r,a=[],s=[],i=n(this.actorList);!(r=i()).done;){var c=r.value;c.isWaitAnim?(s.length>0&&(a.push(s),s=[]),a.push([c])):s.push(c)}s.length>0&&a.push(s),e(o().mark((function r(){var s,i,c,u,h,d,p,l,f;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:s=0,i=a;case 1:if(!(s<i.length)){r.next=10;break}for(c=i[s],u=[],h=n(c);!(d=h()).done;)p=d.value,(l=p.animClipList.splice(0)).length>0&&(f=l.reduce(e(o().mark((function t(r,n){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r;case 2:return t.abrupt("return",n.play());case 3:case"end":return t.stop()}}),t)}))),Promise.resolve()),u.push(f));return r.next=7,Promise.all(u);case 7:s++,r.next=1;break;case 10:t.animStatus=2;case 11:case"end":return r.stop()}}),r)})))()}},i.roundStart=function(){this.roundOverCount=0,this.animStatus=0;for(var t,r=[],e=[],a=n(this.actorList);!(t=a()).done;){var o=t.value;o.data.runtime.health>0?r.push(o):e.push(o)}this.actorList=r;for(var s=0,i=e;s<i.length;s++){i[s].node.destroy()}for(var c,u=n(this.actorMap);!(c=u()).done;){var h=c.value,d=h[0],p=h[1];this.actorMap.set(d,p.filter((function(t){return t.data.runtime.health>0}))),0===this.actorMap.get(d).length&&this.actorMap.delete(d)}},i.isAllRoundEnded=function(){return this.roundOverCount==this.actorList.length&&2==this.animStatus},a(s,[{key:"player",get:function(){return this.actorList.length>0?this.actorList[0]:null}}]),s}(p)).ACTOR="Actor",L.PLAYER="player001",L.GRASS="building002",L.FLIES="monster001",L.TILE001="tile001",A=L))||A);s._RF.pop()}}}));

System.register("chunks:///_virtual/AnimSprite.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AnimSpriteData.ts","./Logic.ts"],(function(t){var e,i,r,n,s,a,o,p,h,c;return{setters:[function(t){e=t.inheritsLoose,i=t.createClass},function(t){r=t.cclegacy,n=t._decorator,s=t.tween,a=t.UITransform,o=t.Sprite,p=t.Component},function(t){h=t.default},function(t){c=t.Logic}],execute:function(){var u,m;r._RF.push({},"5f94e/KS3lPy5DLDgQF9Xhn","AnimSprite",void 0);var f=n.ccclass;n.property,t("AnimSprite",f("AnimSprite")(((m=function(t){function r(){for(var e,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))||this)._sprite=void 0,e._transform=void 0,e.spriteTween=void 0,e.data=new h(0,0,"",!1),e}e(r,t);var n=r.prototype;return n.init=function(t,e){this.data=t,e&&this.playFrames(!0,r.RES_IDLE000,r.RES_IDLE001)},n.playFrames=function(t){var e=this;this.spriteTween&&this.spriteTween.stop();for(var i=s(),r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];for(var o=function(){var t=h[p];i.call((function(){e.changeSpriteRes(e.data.res,t)})).delay(.2)},p=0,h=n;p<h.length;p++)o();this.spriteTween=t?s(this.sprite).repeatForever(i).start():s(this.sprite).then(i).start()},n.changeSpriteRes=function(t,e){if(e&&e.indexOf("anim0")>-1){var i=e.replace("anim0","anim1");this.getSpriteFrameByName(t,i)&&(e=i)}var r=this.getSpriteFrameByName(t,e);r?(this.sprite.spriteFrame=r,this.trans.width=this.data.width,this.trans.height=this.data.height):this.sprite.spriteFrame=null},n.getSpriteFrameByName=function(t,e){var i=c.loadingManager.spriteFrameRes(t+e,this.data.isResAuto);return i||(i=c.loadingManager.spriteFrameRes(t,this.data.isResAuto)),i},n.onDestroy=function(){this.spriteTween.stop(),this.spriteTween=null},i(r,[{key:"trans",get:function(){return this._transform||(this._transform=this.getComponent(a)),this._transform}},{key:"sprite",get:function(){return this._sprite||(this._sprite=this.node.getComponent(o)),this._sprite}}]),r}(p)).RES_IDLE000="anim000",m.RES_IDLE001="anim001",u=m))||u);r._RF.pop()}}}));

System.register("chunks:///_virtual/AnimSpriteData.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"b191738TcNCCZLdM6NkBWrx","AnimSpriteData",void 0);t("default",function(){function t(t,i,s,e){this.res="",this.width=0,this.height=0,this.isResAuto=!1,this.res=s,this.width=t,this.height=i,this.isResAuto=e}return t.prototype.clone=function(){return new t(this.width,this.height,this.res,this.isResAuto)},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/AsyncAStar.ts",["cc","./GridNode.ts","./BinaryHeap.ts"],(function(t){var i,s,e;return{setters:[function(t){i=t.cclegacy},function(t){s=t.GridNode},function(t){e=t.BinaryHeap}],execute:function(){i._RF.push({},"8a91aV6TQpImbeXf0wlCYZT","AsyncAStar",void 0);var h=t("Heuristics",function(){function t(){}return t.manhattan=function(t,i){return Math.abs(i.x-t.x)+Math.abs(i.y-t.y)},t.diagonal=function(t,i){var s=Math.sqrt(2),e=Math.abs(i.x-t.x),h=Math.abs(i.y-t.y);return 1*(e+h)+(s-2)*Math.min(e,h)},t}());t("AsyncAStar",function(){function t(t,i){var a,n,r;void 0===i&&(i={closest:!1,maxIterationTimesInStep:30}),this.graph=void 0,this.openHeap=void 0,this.heuristic=void 0,this.closest=void 0,this.maxIterationTimesInStep=void 0,this.closestNode=void 0,this.isSearching=void 0,this.searchFrames=void 0,this.start=void 0,this.end=void 0,this.callback=void 0,this.graph=t,this.heuristic=null!=(a=i.heuristic)?a:t.isDiagonal()?h.diagonal:h.manhattan,this.closest=null!=(n=i.closest)&&n,this.maxIterationTimesInStep=null!=(r=i.maxIterationTimesInStep)?r:30,this.openHeap=new e((function(t){return t.f}));var o=new s(0,0,0);this.closestNode=o,this.start=o,this.end=o,this.isSearching=!1,this.searchFrames=0}var i=t.prototype;return i.search=function(t,i,s){this.callback=s,this.graph.cleanDirty(),this.openHeap.clean(),this.start=t,this.end=i,this.closestNode=t,t.h=this.heuristic(t,i),this.graph.markDirty(t),this.openHeap.push(t),this.isSearching=!0,this.searchFrames=0},i.finishSearch=function(t){this.isSearching=!1;var i=[];if(null!=t)for(var s=t;s.parent;)i.unshift(s),s=s.parent;null!=this.callback&&this.callback(this.searchFrames,i)},i.step=function(){if(this.isSearching){this.searchFrames++;for(var t=this.maxIterationTimesInStep;this.openHeap.size()>0&&t>0;){t--;var i=this.openHeap.pop();if(i===this.end)return this.finishSearch(i),!1;i.closed=!0;for(var s=this.graph.neighbors(i),e=0,h=s.length;e<h;++e){var a=s[e];if(!a.closed&&!a.isWall()){var n=i.g+a.getCost(i),r=a.visited;(!r||n<a.g)&&(a.visited=!0,a.parent=i,a.h=a.h||this.heuristic(a,this.end),a.g=n,a.f=a.g+a.h,this.graph.markDirty(a),this.closest&&(a.h<this.closestNode.h||a.h===this.closestNode.h&&a.g<this.closestNode.g)&&(this.closestNode=a),r?this.openHeap.rescoreElement(a):this.openHeap.push(a))}}}return 0!=this.openHeap.size()||(this.closest?(this.finishSearch(this.closestNode),!1):(this.finishSearch(null),!1))}return!1},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/AtlasLoadTask.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseLoadTask.ts"],(function(e){var t,o,r,a,s,n,i;return{setters:[function(e){t=e.inheritsLoose,o=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy,a=e.resources,s=e.SpriteAtlas,n=e.error},function(e){i=e.BaseLoadTask}],execute:function(){r._RF.push({},"1a088g7Uf5GrKtESgdTh5U/","AtlasLoadTask",void 0);e("AtlasLoadTask",function(e){function r(){return e.apply(this,arguments)||this}return t(r,e),r.prototype.doLoad=function(e,t){a.load(e,s,(function(e,r){if(e)n(e);else{for(var a,s={},i=o(r.getSpriteFrames());!(a=i()).done;){var u=a.value;s[u.name]=u}t(s)}}))},r}(i));r._RF.pop()}}}));

System.register("chunks:///_virtual/BaseController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EnumData.ts","./Utils.ts"],(function(t){var a,r,o,s,n,e,c,i,u;return{setters:[function(t){a=t.inheritsLoose,r=t.createClass},function(t){o=t.cclegacy,s=t._decorator,n=t.v3,e=t.log,c=t.Component},function(t){i=t.RoundStatus},function(t){u=t.default}],execute:function(){var l;o._RF.push({},"a0f00uhSPJPSKQi58Ksp8pW","BaseController",void 0);var h=s.ccclass;s.property,t("BaseController",h("BaseController")(l=function(t){function o(){for(var a,r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(a=t.call.apply(t,[this].concat(o))||this).actor=null,a}a(o,t);var s=o.prototype;return s.start=function(){},s.ctrlMove=function(t){var a=this;if(this.CanControl){var r=u.clampPos(t,this.actor.gameWorld.data.size,n(0,0));if(r.equals(this.actor.data.pos))return;if(this.actor.roundStatus=i.RUNNING,this.actor.data.isStatic)return void this.actor.roundEnd();e("actor:["+this.actor.data.pos.x+","+this.actor.data.pos.y+"]"),e("target:["+r.x+","+r.y+"]"),this.actor.search(this.actor.data.pos,r,(function(t,r){e("result:"+r);var o=a.actor.data.pos;r.length>0&&(o=n(r[0].x,r[0].y)),a.actor.ctrlMove(o)})),this.actor.astar.step()}},r(o,[{key:"CanControl",get:function(){return this.node&&this.actor&&this.actor.isValid&&this.actor.data.runtime.health>0&&this.actor.roundStatus==i.START}}]),o}(c))||l);o._RF.pop()}}}));

System.register("chunks:///_virtual/BaseLoadTask.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var i,s,o;return{setters:[function(e){i=e.createClass},function(e){s=e.cclegacy,o=e.log}],execute:function(){s._RF.push({},"e1115UFSkZP075fY7lymIht","BaseLoadTask",void 0);e("BaseLoadTask",function(){function e(){this._isLoading=!1,this._resource=void 0}return e.prototype.load=function(e,i){var s=this;if(!this._isLoading){if(this.resource)return this._isLoading=!1,o("cache load "+e+" finish"),void i(this.resource);this._isLoading=!0,this.doLoad(e,(function(t){s._resource=t,s._isLoading=!1,o("load "+e+" finish"),i(s.resource)}))}},i(e,[{key:"resource",get:function(){return this._resource}},{key:"isLoaded",get:function(){return!!this._resource}}]),e}());s._RF.pop()}}}));

System.register("chunks:///_virtual/BaseManager.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"b1759ELUNVFYbQcJ1pWfBQe","BaseManager",void 0);e("BaseManager",(function(){}));n._RF.pop()}}}));

System.register("chunks:///_virtual/BinaryHeap.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"f65c4hIPJBAz6SoQFzobePt","BinaryHeap",void 0);e("BinaryHeap",function(){function e(e){this.elements=[],this.scoreFunction=void 0,this.scoreFunction=e}var t=e.prototype;return t.push=function(e){this.elements.push(e),this.sinkDown(this.elements.length-1)},t.pop=function(){var e=this.elements[0],t=this.elements.pop();if(this.elements.length>0){if(!t)throw new TypeError("[BinaryHeap]: pop() expected is object, actual is undefined");this.elements[0]=t,this.bubbleUp(0)}return e},t.remove=function(e){var t=this.elements.indexOf(e),n=this.elements.pop();if(t!==this.elements.length-1){if(!n)throw new TypeError("[BinaryHeap]: remove() expected is object, actual is undefined");this.elements[t]=n,this.scoreFunction(n)<this.scoreFunction(e)?this.sinkDown(t):this.bubbleUp(t)}},t.size=function(){return this.elements.length},t.clean=function(){this.elements=[]},t.rescoreElement=function(e){this.sinkDown(this.elements.indexOf(e))},t.sinkDown=function(e){for(var t=this.elements[e];e>0;){var n=(e+1>>1)-1,s=this.elements[n];if(!(this.scoreFunction(t)<this.scoreFunction(s)))break;this.elements[n]=t,this.elements[e]=s,e=n}},t.bubbleUp=function(e){for(var t=this.elements.length,n=this.elements[e],s=this.scoreFunction(n);;){var i=e+1<<1,o=i-1,r=null,h=0;if(o<t){var c=this.elements[o];(h=this.scoreFunction(c))<s&&(r=o)}if(i<t){var l=this.elements[i];this.scoreFunction(l)<(null===r?s:h)&&(r=i)}if(null===r)break;this.elements[e]=this.elements[r],this.elements[r]=n,e=r}},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/CameraController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TransformComponent.ts"],(function(t){var e,r,o,i,n,a,s,c,l,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,s=t.Camera,c=t.Vec3,l=t.v3},function(t){u=t.TransformComponent}],execute:function(){var h,p,m,d,f;n._RF.push({},"cabc95HP0hK6b0h+zvSUiwG","CameraController",void 0);var y=a.ccclass,g=a.property;t("CameraController",(h=y("CameraController"),p=g(s),h((f=e((d=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,o(e,"camera",f,i(e)),e.targetPos=c.ZERO,e.hasImmediate=!1,e}r(e,t);var n=e.prototype;return n.start=function(){},n.update=function(t){this.hasImmediate&&(this.hasImmediate=!1,this.node.setWorldPosition(this.targetPos)),this.node.setWorldPosition(this.lerp(this.node.getWorldPosition(),this.targetPos,.1))},n.setTarget=function(t,e){void 0===e&&(e=!1),this.targetPos=t,e&&(this.hasImmediate=!0)},n.lerp=function(t,e,r){var o=l(0,0),i=t.x,n=t.y;return o.x=i+(e.x-i)*r,o.y=n+(e.y-n)*r,o},e}(u)).prototype,"camera",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=d))||m));n._RF.pop()}}}));

System.register("chunks:///_virtual/CommonData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DataUtils.ts"],(function(e){var t,a,r,i,n;return{setters:[function(e){t=e.extends,a=e.objectDestructuringEmpty,r=e.createClass},function(e){i=e.cclegacy},function(e){n=e.default}],execute:function(){i._RF.push({},"1c9efFu2RBGFYSq9lUCLUbs","CommonData",void 0);e("default",function(){function e(){this.maxHealth=0,this.maxDream=0,this.maxAmmo=0,this.ammoRecovery=0,this.damageMin=0,this.damageMax=0,this.damageBack=0,this.defence=0,this.moveSpeed=0,this.attackSpeed=0,this.jumpSpeed=0,this.jumpHeight=0,this.remoteDamage=0,this.realDamage=0,this.magicDamage=0,this.blockDamage=0,this.remoteCooldown=0,this.criticalStrikeRate=0,this.blockPhysicalRate=0,this.blockMagicRate=0,this.lifeDrainRate=0,this.dodgeRate=0,this.remoteCritRate=0,this.remoteInterval=0,this.remoteAngle=0,this.realRate=0,this.magicDefenceRate=0,this.iceRate=0,this.fireRate=0,this.lighteningRate=0,this.toxicRate=0,this.curseRate=0,this.maxHealthPercent=0,this.maxDreamPercent=0,this.maxAmmoPercent=0,this.ammoRecoveryPercent=0,this.damageMinPercent=0,this.damageMaxPercent=0,this.damageBackPercent=0,this.defencePercent=0,this.moveSpeedPercent=0,this.attackSpeedPercent=0,this.jumpSpeedPercent=0,this.jumpHeightPercent=0,this.remoteDamagePercent=0,this.realDamagePercent=0,this.magicDamagePercent=0}var i=e.prototype;return i.returnNumberValue=function(e,t){var a=e*(1+t);return a<1?a:Math.floor(a)},i.valueCopy=function(e){e&&n.baseCopy(this,e)},i.clone=function(){var t=new e;return t.valueCopy(this),t},i.add=function(e){for(var t=0,a=Object.keys(this);t<a.length;t++){var r=a[t];-1!=r.indexOf("Rate")?this[r]=n.addRateFixed(this[r],e[r]):-1!=r.indexOf("Percent")?this[r]=n.addPercentFixed(this[r],e[r]):this[r]+=e[r]?e[r]:0}return this},i.toJSON=function(){var e=t({},(a(this),this));for(var r in e)e.hasOwnProperty(r)&&0===e[r]&&delete e[r];return e},r(e,[{key:"MaxHealth",get:function(){return this.returnNumberValue(this.maxHealth,this.maxHealthPercent/100)}},{key:"MaxDream",get:function(){return this.returnNumberValue(this.maxDream,this.maxDreamPercent/100)}},{key:"MaxAmmo",get:function(){return this.returnNumberValue(this.maxAmmo,this.maxAmmoPercent/100)}},{key:"AmmoRecovery",get:function(){return this.returnNumberValue(this.ammoRecovery,this.ammoRecoveryPercent/100)}},{key:"DamageMin",get:function(){return this.returnNumberValue(this.damageMin,this.damageMinPercent/100)}},{key:"DamageMax",get:function(){return this.returnNumberValue(this.damageMax,this.damageMaxPercent/100)}},{key:"DamageBack",get:function(){return this.returnNumberValue(this.damageBack,this.damageBackPercent/100)}},{key:"Defence",get:function(){return this.returnNumberValue(this.defence,this.defencePercent/100)}},{key:"MoveSpeed",get:function(){return this.returnNumberValue(this.moveSpeed,this.moveSpeedPercent/100)}},{key:"AttackSpeed",get:function(){return this.returnNumberValue(this.attackSpeed,this.attackSpeedPercent/100)}},{key:"JumpSpeed",get:function(){return this.returnNumberValue(this.jumpSpeed,this.jumpSpeedPercent/100)}},{key:"JumpHeight",get:function(){return this.returnNumberValue(this.jumpHeight,this.jumpHeightPercent/100)}},{key:"RemoteDamage",get:function(){return this.returnNumberValue(this.remoteDamage,this.remoteDamagePercent/100)}},{key:"RealDamage",get:function(){return this.returnNumberValue(this.realDamage,this.realDamagePercent/100)}},{key:"MagicDamage",get:function(){return this.returnNumberValue(this.magicDamage,this.magicDamagePercent/100)}}]),e}());i._RF.pop()}}}));

System.register("chunks:///_virtual/DamageData.ts",["cc","./DataUtils.ts","./DamageType.ts"],(function(t){var e,a,n;return{setters:[function(t){e=t.cclegacy},function(t){a=t.default},function(t){n=t.DamageType}],execute:function(){e._RF.push({},"21b40EffelJA5S5bCfQR9Jm","DamageData",void 0);t("default",function(){function t(){this.damage=0,this.damageType=n.PHYSICAL}var e=t.prototype;return e.valueCopy=function(t){t&&a.baseCopy(this,t)},e.clone=function(){var e=new t;return e.valueCopy(this),e},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/DamageType.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"06ad2k3cdFFPIredI32LKnO","DamageType",void 0);e("DamageType",function(e){return e[e.PHYSICAL=0]="PHYSICAL",e[e.MAGICAL=1]="MAGICAL",e[e.REAL=2]="REAL",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/DataUtils.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t;return{setters:[function(e){n=e.createForOfIteratorHelperLoose},function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"7bda9n8UuJMxLnYALkFiqxd","DataUtils",void 0);e("default",function(){function e(){}return e.baseCopy=function(e,n,t){if(n&&e&&e!==n)for(var r=0,a=Object.keys(e);r<a.length;r++){var i=a[r];"number"==typeof e[i]?e[i]=t?n[i]?n[i]:e[i]:n[i]?n[i]:0:"string"==typeof e[i]?e[i]=t?n[i]?n[i]:e[i]:n[i]?n[i]:"":"boolean"==typeof e[i]&&(e[i]=!!n[i]&&n[i])}},e.copyMapValue=function(e,n){var t=new Map;return e&&e.forEach((function(e,r){t.set(r,n(e))})),t},e.copyListValue=function(e,t){var r=[];if(e)for(var a,i=n(e);!(a=i()).done;){var u=a.value;r.push(t(u))}return r},e.cloneKeyValue=function(e,n){var t={};for(var r in e)t[r]=n(e[r]);return t},e.cloneNumberKeyValue=function(e,n){var t={};for(var r in e)t[r]=n(e[r]);return t},e.addRateFixed=function(n,t){return e.fixRateRange(e.addRate(n,t),0,100)},e.addRate=function(e,n){if(!n||isNaN(n))return!e||isNaN(e)?0:e;if(!e||isNaN(e))return!n||isNaN(n)?0:n;var t=1;return t*=1-e/100,100*(1-(t*=1-n/100))},e.addPercentFixed=function(n,t){return e.fixRateRange(e.addRate(n,t),-100,9999)},e.fixRateRange=function(e,n,t){return e=(e=e<n?n:e)>t?t:e},e.getinfoNum2String=function(e,n,t,r){if(e)return"";if(isNaN(t))return""+n;if(0==t)return""+n+t+r;var a=""+t.toFixed(2).replace(".00","");if(a.indexOf(".")>-1){var i=a.split("."),u=i[1];u.length>1&&u.endsWith("0")&&(u=u.substring(0,u.length-1)),a=i[0]+"."+u}return""+n+a+r},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/EnumData.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"b0840/KE31AWZ/ZIV9xvGcT","EnumData",void 0);t("RoundStatus",function(t){return t[t.START=0]="START",t[t.RUNNING=1]="RUNNING",t[t.END=2]="END",t}({}));n._RF.pop()}}}));

System.register("chunks:///_virtual/EventHelper.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(E){var e,t,n,R,o;return{setters:[function(E){e=E.inheritsLoose},function(E){t=E.cclegacy,n=E._decorator,R=E.director,o=E.Component}],execute:function(){var c,i;t._RF.push({},"0cd89RtMSFLDLn7qc0hIdos","EventHelper",void 0);var r=n.ccclass;E("EventHelper",r("EventHelper")(((i=function(E){function t(){return E.apply(this,arguments)||this}return e(t,E),t.emit=function(E,e){e?R.emit(E,{detail:e}):R.emit(E)},t.on=function(E,e){R.on(E,(function(E){e(E?E.detail:{})}))},t.off=function(E){R.off(E)},t}(o)).PLAYER_MOVE="PLAYER_MOVE",i.PLAYER_TARGET_MOVE="PLAYER_TARGET_MOVE",i.PLAYER_ROTATE="PLAYER_ROTATE",i.PLAYER_TRIGGER="PLAYER_TRIGGER",i.PLAYER_USEITEM="PLAYER_USEITEM",i.USEITEM_KEYBOARD="USEITEM_KEYBOARD",i.KEYBOARD_INTERACT="KEYBOARD_INTERACT",i.KEYBOARD_MOVE="KEYBOARD_MOVE",c=i))||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/GameController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CameraController.ts"],(function(i){var t,e,a,n,r,u,o,s,l,c,h,f,d;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,a=i.initializerDefineProperty,n=i.assertThisInitialized},function(i){r=i.cclegacy,u=i._decorator,o=i.Camera,s=i.Prefab,l=i.instantiate,c=i.UIOpacity,h=i.tween,f=i.Component},function(i){d=i.CameraController}],execute:function(){var m,p,b,g,v,C,G,L,y,F,P,S,w,z,U;r._RF.push({},"a737awQTK5HB6jqu5ARmR5d","GameController",void 0);var R=u.ccclass,_=u.property;i("GameController",(m=R("Game"),p=_(o),b=_(d),g=_(s),v=_(s),C=_(s),G=_(s),m((F=t((y=function(i){function t(){for(var t,e=arguments.length,r=new Array(e),u=0;u<e;u++)r[u]=arguments[u];return t=i.call.apply(i,[this].concat(r))||this,a(t,"uiCamera",F,n(t)),a(t,"cameraController",P,n(t)),a(t,"uiStartPrefab",S,n(t)),a(t,"uiLoadingPrefab",w,n(t)),a(t,"uiGamePrefab",z,n(t)),a(t,"uiFinishPrefab",U,n(t)),t.uiStart=null,t.uiLoading=null,t.uiGame=null,t.uiFinish=null,t}e(t,i);var r=t.prototype;return r.start=function(){this.initStart(),this.initLoading(),this.initGame(),this.initFinish()},r.initStart=function(){this.uiStart=l(this.uiStartPrefab),this.node.addChild(this.uiStart)},r.initLoading=function(){this.uiLoading=l(this.uiLoadingPrefab),this.uiLoading.active=!1,this.node.addChild(this.uiLoading)},r.initGame=function(){this.uiGame=l(this.uiGamePrefab),this.uiGame.active=!1,this.node.addChild(this.uiGame)},r.initFinish=function(){this.uiFinish=l(this.uiFinishPrefab),this.uiFinish.active=!1,this.node.addChild(this.uiFinish)},r.showLoadingUi=function(){this.uiStart.active=!1,this.uiLoading.active=!0,this.uiLoading.getComponent(c).opacity=255,this.uiGame.active=!1,this.uiFinish.active=!1},r.showStartUi=function(){this.uiStart.active=!0,this.uiLoading.active=!1,this.uiGame.active=!1,this.uiFinish.active=!1},r.showGameUi=function(){var i=this;this.uiGame.active=!0,this.uiStart.active=!1,this.uiFinish.active=!1,h(this.uiLoading.getComponent(c)).to(.5,{opacity:0}).call((function(){i.uiLoading.active=!1})).start()},r.showFinishUi=function(){this.uiStart.active=!1,this.uiLoading.active=!1,this.uiGame.active=!1,this.uiFinish.active=!0},r.update=function(i){},t}(f)).prototype,"uiCamera",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(y.prototype,"cameraController",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(y.prototype,"uiStartPrefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(y.prototype,"uiLoadingPrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(y.prototype,"uiGamePrefab",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(y.prototype,"uiFinishPrefab",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=y))||L));r._RF.pop()}}}));

System.register("chunks:///_virtual/GameData.ts",["cc","./DataUtils.ts"],(function(t){var e,n,i,s;return{setters:[function(t){e=t.cclegacy,n=t.v3,i=t.Vec3},function(t){s=t.default}],execute:function(){e._RF.push({},"d6b3472wSJMh7BxR2woHbqs","GameData",void 0);t("default",function(){function t(){this.maxRoundCount=0,this.size=n(11,11)}var e=t.prototype;return e.valueCopy=function(t){t&&(s.baseCopy(this,t),this.size=t.size?n(t.size.x,t.size.y):i.ZERO)},e.clone=function(){var e=new t;return e.valueCopy(this),e},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/GameWorld.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TimeCheck.ts","./Random4Save.ts","./ActorManager.ts","./Logic.ts","./Graph.ts","./GameData.ts","./Tile.ts","./Utils.ts"],(function(e){var r,t,n,a,i,o,s,l,c,u,h,f,d,p,g,y,m,b,v,w,C,x,L,M;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized,i=e.createForOfIteratorHelperLoose,o=e.createClass,s=e.asyncToGenerator,l=e.regeneratorRuntime},function(e){c=e.cclegacy,u=e._decorator,h=e.Node,f=e.Prefab,d=e.Component,p=e.v3,g=e.instantiate,y=e.log},function(e){m=e.default},function(e){b=e.default},function(e){v=e.ActorManager},function(e){w=e.Logic},function(e){C=e.Graph},function(e){x=e.default},function(e){L=e.Tile},function(e){M=e.default}],execute:function(){var k,G,F,P,A,z,R,I,S,D,T,E,O;c._RF.push({},"163609ca71EzqMqKkxIfFqP","GameWorld",void 0);var W=u.ccclass,_=u.property;e("GameWorld",(k=W("GameWorld"),G=_(h),F=_(h),P=_(h),A=_(h),z=_(f),k((S=r((I=function(e){function r(){for(var r,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i))||this,n(r,"floorLayer",S,a(r)),n(r,"actorLayer",D,a(r)),n(r,"bgLayer",T,a(r)),n(r,"infoLayer",E,a(r)),n(r,"tilePrefab",O,a(r)),r.actorManager=new v,r.gameController=void 0,r.cameraController=void 0,r.tilesmap=new Array,r.tilesInfomap=new Array,r.roundCheck=new m(.2),r.rand=new b(0),r.initFinish=!1,r.graph=void 0,r.data=new x,r}t(r,e);var c=r.prototype;return c.init=function(e,r){var t=this;this.initFinish=!1,this.gameController=e,this.cameraController=r,this.initMap(this.data.size.x,this.data.size.y).then((function(){t.initFinish=!0}))},c.initMap=function(){var e=s(l().mark((function e(r,t){var n,a,i,o,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(this.tilesmap=new Array,this.rand=new b(0),this.floorLayer.removeAllChildren(),this.actorLayer.removeAllChildren(),this.actorManager.initBg(this),n=0;n<r;n++)for(this.tilesmap[n]=new Array(n),this.tilesInfomap[n]=new Array(n),a=0;a<t;a++)this.tilesmap[n][a]=1,(i=g(this.tilePrefab).getComponent(L)).node.parent=this.infoLayer,i.init(this,p(n,a));return this.graph=new C(this.tilesmap),e.next=9,this.actorManager.addPlayer(this);case 9:o=0;case 10:if(!(o<r)){e.next=27;break}s=0;case 12:if(!(s<t)){e.next=24;break}if(!(this.rand.rand()>.7)){e.next=18;break}return e.next=16,this.actorManager.addGrass(this,p(o,s));case 16:e.next=21;break;case 18:if(!(this.rand.rand()>.8)){e.next=21;break}return e.next=21,this.actorManager.addNonPlayer(this,p(o,s),v.FLIES);case 21:s++,e.next=12;break;case 24:o++,e.next=10;break;case 27:case"end":return e.stop()}}),e,this)})));return function(r,t){return e.apply(this,arguments)}}(),c.roundStart=function(){var e=s(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.initFinish&&this.cameraController&&this.player&&w.loadingManager.allResourceDone()){e.next=2;break}return e.abrupt("return");case 2:if(w.roundCount++,y("roundStart:"+w.roundCount),!this.isGameOver()){e.next=7;break}return this.goGameOverPage(),e.abrupt("return");case 7:return e.next=9,this.actorManager.randGrass(this);case 9:return e.next=11,this.actorManager.randNonPlayer(this,v.FLIES);case 11:this.actorManager.roundStart(),y("actor数量"+(this.actorLayer.children.length+this.floorLayer.children.length));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),c.roundEnd=function(){this.roundStart()},c.isGameOver=function(){return this.data.maxRoundCount>0&&w.roundCount>=this.data.maxRoundCount||this.player.data.runtime.health<=0},c.goGameOverPage=function(){this.clear(),this.gameController.showFinishUi()},c.update=function(e){this.initFinish&&this.cameraController&&this.player&&w.loadingManager.allResourceDone()&&(this.roundCheck.isTimeDelay(e)&&this.cameraController.setTarget(this.player.node.worldPosition),this.actorManager.isAllRoundEnded()&&this.roundEnd(),this.actorManager.roundLoop())},c.clear=function(){this.actorManager.clear();for(var e,r=i(this.tilesInfomap);!(e=r()).done;){var t=e.value;M.clearComponentArray(t)}this.initFinish=!1},o(r,[{key:"player",get:function(){return this.actorManager.player}}]),r}(d)).prototype,"floorLayer",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=r(I.prototype,"actorLayer",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=r(I.prototype,"bgLayer",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=r(I.prototype,"infoLayer",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=r(I.prototype,"tilePrefab",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=I))||R));c._RF.pop()}}}));

System.register("chunks:///_virtual/GameWorldInterface.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"36f9f9b2PlAGYdmgxFIomkB","GameWorldInterface",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/GlobalConstant.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"2ed07ry5n5LXLveM1FCt48J","GlobalConstant",void 0),t("default",(function(){})).SIZE=64,n._RF.pop()}}}));

System.register("chunks:///_virtual/Graph.ts",["cc","./GridNode.ts"],(function(i){var t,n;return{setters:[function(i){t=i.cclegacy},function(i){n=i.GridNode}],execute:function(){t._RF.push({},"7c40cKjlAdHV45/bntBtvR1","Graph",void 0);i("Graph",function(){function i(i,t){var s;void 0===t&&(t={diagonal:!1}),this.nodes=void 0,this.dirtyNodes=[],this.grid=void 0,this.diagonal=void 0,this.nodes=[],this.diagonal=null!=(s=t.diagonal)&&s,this.grid=[];for(var r=0;r<i.length;r++){this.grid[r]=[];for(var o=0,h=i[r];o<h.length;o++){var e=new n(r,o,h[o]);this.grid[r][o]=e,this.nodes.push(e)}}this.init()}var t=i.prototype;return t.isDiagonal=function(){return this.diagonal},t.init=function(){this.dirtyNodes=[];for(var i=0;i<this.nodes.length;i++)this.nodes[i].clean()},t.cleanDirty=function(){for(var i=0;i<this.dirtyNodes.length;i++)this.dirtyNodes[i].clean();this.dirtyNodes=[]},t.markDirty=function(i){this.dirtyNodes.push(i)},t.neighbors=function(i){var t=[],n=i.x,s=i.y,r=this.grid;return r[n-1]&&r[n-1][s]&&t.push(r[n-1][s]),r[n+1]&&r[n+1][s]&&t.push(r[n+1][s]),r[n]&&r[n][s-1]&&t.push(r[n][s-1]),r[n]&&r[n][s+1]&&t.push(r[n][s+1]),this.diagonal&&(r[n-1]&&r[n-1][s-1]&&t.push(r[n-1][s-1]),r[n+1]&&r[n+1][s-1]&&t.push(r[n+1][s-1]),r[n-1]&&r[n-1][s+1]&&t.push(r[n-1][s+1]),r[n+1]&&r[n+1][s+1]&&t.push(r[n+1][s+1])),t},t.toString=function(){for(var i=[],t=this.grid,n=0;n<t.length;n++){for(var s=[],r=t[n],o=0;o<r.length;o++)s.push(r[o].weight);i.push(s.join(" "))}return i.join("\n")},i}());t._RF.pop()}}}));

System.register("chunks:///_virtual/GridNode.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"fed14vbqTJCc47F8NNN954o","GridNode",void 0);t("GridNode",function(){function t(t,i,s){this.x=void 0,this.y=void 0,this.weight=void 0,this.f=0,this.g=0,this.h=0,this.visited=!1,this.closed=!1,this.parent=null,this.x=t,this.y=i,this.weight=s}var i=t.prototype;return i.toString=function(){return"["+this.x+" "+this.y+"]"},i.getCost=function(t){return t&&t.x!=this.x&&t.y!=this.y?1.41421*this.weight:this.weight},i.isWall=function(){return 0===this.weight},i.clean=function(){this.f=0,this.g=0,this.h=0,this.visited=!1,this.closed=!1,this.parent=null},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/HealthBar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TransformComponent.ts"],(function(r){var t,e,a,i,n,s,o,c,l,p,h,u,b,f,d;return{setters:[function(r){t=r.applyDecoratedDescriptor,e=r.inheritsLoose,a=r.initializerDefineProperty,i=r.assertThisInitialized,n=r.createClass},function(r){s=r.cclegacy,o=r._decorator,c=r.Node,l=r.Label,p=r.ProgressBar,h=r.tween,u=r.v3,b=r.UITransform,f=r.UIOpacity},function(r){d=r.TransformComponent}],execute:function(){var g,y,T,_,k,B,m,v,O;s._RF.push({},"f51dcpXufdO+qhQwTY6TO1Z","HealthBar",void 0);var w=o.ccclass,S=o.property;r("HealthBar",(g=w("HealthBar"),y=S(c),T=S(l),g(((O=function(r){function t(){for(var t,e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return t=r.call.apply(r,[this].concat(n))||this,a(t,"backbar",B,i(t)),a(t,"label",m,i(t)),a(t,"isPlayer",v,i(t)),t.progressBar=void 0,t.timeDelay=0,t.hideWhenFull=!1,t._backbarTrans=void 0,t._barSpriteTrans=void 0,t._nodeOpacity=void 0,t}e(t,r);var s=t.prototype;return s.onLoad=function(){this.progressBar=this.getComponent(p),this.progressBar.progress=1},s.start=function(){},s.refreshHealth=function(r,e){if(this.progressBar){if(this.isPlayer){var a=e*t.ICON_SIZE;this.progressBar.totalLength=a<200?a:200,this.trans.width=this.progressBar.totalLength}this.progressBar.progress=r/e,this.label&&(this.label.string=parseFloat(r.toFixed(1))+"/"+e)}},s.shake=function(){h(this.node).to(.05,{scale:u(1.05,1.05)}).to(.05,{scale:u(.95,.95)}).to(.1,{scale:u(1.05,1.05)}).to(.05,{scale:u(1,1)}).start()},s.update=function(r){this.backbarTrans.width=this.lerp(this.backbarTrans.width,this.barSpriteTrans.width,1*r),this.hideWhenFull&&(1==this.progressBar.progress?this.nodeOpacity.opacity=0:this.nodeOpacity.opacity=255)},s.lerp=function(r,t,e){return r+(t-r)*e},n(t,[{key:"backbarTrans",get:function(){return this._backbarTrans||(this._backbarTrans=this.backbar.getComponent(b)),this._backbarTrans}},{key:"barSpriteTrans",get:function(){return this._barSpriteTrans||(this._barSpriteTrans=this.progressBar.barSprite.node.getComponent(b)),this._barSpriteTrans}},{key:"nodeOpacity",get:function(){return this._nodeOpacity||(this._nodeOpacity=this.node.getComponent(f)),this._nodeOpacity}}]),t}(d)).ICON_SIZE=10,B=t((k=O).prototype,"backbar",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(k.prototype,"label",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(k.prototype,"isPlayer",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_=k))||_));s._RF.pop()}}}));

System.register("chunks:///_virtual/JsonLoadTask.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseLoadTask.ts"],(function(o){var n,s,t,e,a;return{setters:[function(o){n=o.inheritsLoose},function(o){s=o.cclegacy,t=o.resources,e=o.error},function(o){a=o.BaseLoadTask}],execute:function(){s._RF.push({},"4fa84RDV2tJxI1vYFTLjVPT","JsonLoadTask",void 0);o("JsonLoadTask",function(o){function s(){return o.apply(this,arguments)||this}return n(s,o),s.prototype.doLoad=function(o,n){t.load(o,(function(o,s){o?e(o):n(s.json)}))},s}(a));s._RF.pop()}}}));

System.register("chunks:///_virtual/KeyboardController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TimeCheck.ts","./EventHelper.ts","./Logic.ts"],(function(e){var t,s,i,n,o,r,a,c,h,p,u;return{setters:[function(e){t=e.inheritsLoose},function(e){s=e.cclegacy,i=e._decorator,n=e.input,o=e.Input,r=e.KeyCode,a=e.v3,c=e.Component},function(e){h=e.default},function(e){p=e.EventHelper},function(e){u=e.Logic}],execute:function(){var y;s._RF.push({},"20816qNVchBo5uYyQ1xyi8p","KeyboardController",void 0);var f=i.ccclass;i.property,e("KeyboardController",f("KeyboardController")(y=function(e){function s(){for(var t,s=arguments.length,i=new Array(s),n=0;n<s;n++)i[n]=arguments[n];return(t=e.call.apply(e,[this].concat(i))||this).isUp=!1,t.isDown=!1,t.isLeft=!1,t.isRight=!1,t.isCenter=!1,t.timeCheck=new h(.3),t}t(s,e);var i=s.prototype;return i.onLoad=function(){n.on(o.EventType.KEY_DOWN,this.onKeyDown,this),n.on(o.EventType.KEY_UP,this.onKeyUp,this)},i.onDestroy=function(){n.off(o.EventType.KEY_DOWN,this.onKeyDown,this),n.off(o.EventType.KEY_UP,this.onKeyUp,this)},i.onKeyDown=function(e){switch(e.keyCode){case r.KEY_W:this.isUp=!0;break;case r.KEY_S:this.isDown=!0;break;case r.KEY_A:this.isLeft=!0;break;case r.KEY_D:this.isRight=!0;break;case r.SPACE:this.isCenter=!0}this.sendMoveMessageToPlayer()},i.onKeyUp=function(e){switch(e.keyCode){case r.KEY_W:this.isUp=!1;break;case r.KEY_S:this.isDown=!1;break;case r.KEY_A:this.isLeft=!1;break;case r.KEY_D:this.isRight=!1;break;case r.SPACE:this.isCenter=!1}},i.sendMoveMessageToPlayer=function(){var e=a(9999,9999);if(this.isUp&&(e=a(0,1)),this.isDown&&(e=a(0,-1)),this.isLeft&&(e=a(-1,0)),this.isRight&&(e=a(1,0)),this.isCenter&&(e=a(0,0)),!e.equals(a(9999,9999))){if(u.isGamePause)return void p.emit(p.KEYBOARD_MOVE,{pos:e});p.emit(p.PLAYER_MOVE,{pos:e})}},s}(c))||y);s._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SpriteFrameListLoadTask.ts","./JsonLoadTask.ts"],(function(a){var e,r,t,o,s,i,n,c,u;return{setters:[function(a){e=a.createForOfIteratorHelperLoose,r=a.createClass},function(a){t=a.cclegacy,o=a.log,s=a.resources,i=a.Prefab,n=a.SpriteAtlas},function(a){c=a.SpriteFrameListLoadTask},function(a){u=a.JsonLoadTask}],execute:function(){t._RF.push({},"11ca4h+ySJCE53s4e28cYH0","LoadingManager",void 0);var d=a("LoadingManager",function(){function a(){this.autoFrameListLoadTask=new c,this.resourceLoadMap=new Map,this.actorJsonLoadTask=new u,this.prefabs={},this.spriteFrames={},this.allResCallback=void 0}var t=a.prototype;return t.spriteFrameRes=function(a,e){return void 0===e&&(e=!1),e?this.autoFrameListLoadTask.resource[a]?this.autoFrameListLoadTask.resource[a]:null:this.spriteFrames[a]?this.spriteFrames[a]:null},t.load=function(a){this.allResCallback=a,this.autoFrameListLoadTask.load("texture/auto",(function(){})),this.actorJsonLoadTask.load("data/actor",(function(){}))},t.updateLogic=function(a){this.autoFrameListLoadTask.isLoaded&&this.actorJsonLoadTask.isLoaded&&this.allResCallback&&this.allResCallback()},t.loadActorPrefab=function(a,r){var t=this;this.prefabs[a]?r&&r(0):this.resourceLoadMap.has(a)?this.resourceLoadMap.get(a).push(r):(this.resourceLoadMap.set(a,new Array),o("加载"+a+"预制"),s.load("prefab/actor/"+a,i,(function(s,i){if(i&&(t.prefabs[a]=i),o("加载"+a+"预制"+(i?"完成":"失败")),r&&r(i?1:2),t.resourceLoadMap.has(a)){for(var n,c=e(t.resourceLoadMap.get(a));!(n=c()).done;){var u=n.value;u&&u(i?1:2)}t.resourceLoadMap.delete(a)}})))},t.getActorPrefab=function(a){var e=this;return new Promise((function(r){e.loadActorPrefab(a,(function(){r(e.prefabs[a])}))}))},t.loadActorSpriteAtlas=function(a,r){var t=this;this.spriteFrames[a+"anim000"]?r&&r(0):this.resourceLoadMap.has(a)?this.resourceLoadMap.get(a).push(r):(this.resourceLoadMap.set(a,new Array),o("加载"+a+"图集"),s.load("texture/actor/"+a,n,(function(s,i){if(i)for(var n,c=e(i.getSpriteFrames());!(n=c()).done;){var u=n.value;t.spriteFrames[u.name.split("/")[1]]=u}if(o("加载"+a+"图集"+(i?"完成":"失败")),r&&r(i?1:2),t.resourceLoadMap.has(a)){for(var d,l=e(t.resourceLoadMap.get(a));!(d=l()).done;){var L=d.value;L&&L(i?1:2)}t.resourceLoadMap.delete(a)}})))},t.loadActorSpriteAtlasSync=function(a){var e=this;return new Promise((function(r){e.loadActorSpriteAtlas(a,(function(a){r(a)}))}))},t.allResourceDone=function(){return this.resourceLoadMap.size<1},r(a,[{key:"actorDatas",get:function(){return this.actorJsonLoadTask.resource}}]),a}());d.LOAD_CACHE=0,d.LOAD_SUCCESS=1,d.LOAD_FAIL=2,t._RF.pop()}}}));

System.register("chunks:///_virtual/Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LoadingManager.ts"],(function(t){var n,o,e,r,i,a;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator,r=t.director,i=t.Component},function(t){a=t.LoadingManager}],execute:function(){var c,u;o._RF.push({},"cde8ejEfwdPxbA76ch9Btfa","Logic",void 0);var s=e.ccclass;e.property,t("Logic",s("Logic")(((u=function(t){function o(){return t.apply(this,arguments)||this}n(o,t);var e=o.prototype;return e.onLoad=function(){r.addPersistRootNode(this.node)},e.start=function(){},e.update=function(t){},o.getActorPrefab=function(t){return this.loadingManager.getActorPrefab(t)},o}(i)).isGamePause=!1,u.roundCount=0,u.loadingManager=new a,c=u))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./Test.ts","./Actor.ts","./Tile.ts","./TransformComponent.ts","./AnimSprite.ts","./TileBg.ts","./GlobalConstant.ts","./ActorData.ts","./AnimSpriteData.ts","./CommonData.ts","./DamageData.ts","./DamageType.ts","./EnumData.ts","./GameData.ts","./RuntimeData.ts","./TileData.ts","./GameWorldInterface.ts","./BaseController.ts","./CameraController.ts","./GameController.ts","./GameWorld.ts","./KeyboardController.ts","./Logic.ts","./NonPlayerController.ts","./PlayerController.ts","./RoundAnimClip.ts","./ActorManager.ts","./BaseManager.ts","./LoadingManager.ts","./RoundAnimManager.ts","./HealthBar.ts","./UiFinish.ts","./UiGame.ts","./UiLoading.ts","./UiStart.ts","./AtlasLoadTask.ts","./BaseLoadTask.ts","./DataUtils.ts","./EventHelper.ts","./JsonLoadTask.ts","./PrefabListLoadTask.ts","./PrefabLoadTask.ts","./Random.ts","./Random4Save.ts","./SpriteFrameListLoadTask.ts","./TimeCheck.ts","./Utils.ts","./AsyncAStar.ts","./BinaryHeap.ts","./Graph.ts","./GridNode.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/NonPlayerController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseController.ts"],(function(o){var r,t,n,e;return{setters:[function(o){r=o.inheritsLoose},function(o){t=o.cclegacy,n=o._decorator},function(o){e=o.BaseController}],execute:function(){var a;t._RF.push({},"43b37ruv7BKt4UAYRzY1wTp","NonPlayerController",void 0);var l=n.ccclass;n.property,o("NonPlayerController",l("NonPlayerController")(a=function(o){function t(){return o.apply(this,arguments)||this}r(t,o);var n=t.prototype;return n.onLoad=function(){},n.onDestroy=function(){},n.update=function(o){this.actor&&this.actor.isValid&&this.ctrlMove(this.actor.gameWorld.actorManager.player.data.pos)},t}(e))||a);t._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseController.ts","./EventHelper.ts"],(function(o){var t,r,n,e,l;return{setters:[function(o){t=o.inheritsLoose},function(o){r=o.cclegacy,n=o._decorator},function(o){e=o.BaseController},function(o){l=o.EventHelper}],execute:function(){var c;r._RF.push({},"f5901R9NChGMpVoTyYdxMK1","PlayerController",void 0);var a=n.ccclass;n.property,o("PlayerController",a("PlayerController")(c=function(o){function r(){return o.apply(this,arguments)||this}t(r,o);var n=r.prototype;return n.onLoad=function(){var o=this;l.on(l.PLAYER_MOVE,(function(t){o.actor&&o.actor.data&&o.ctrlMove(o.actor.data.pos.clone().add(t.pos))})),l.on(l.PLAYER_TARGET_MOVE,(function(t){o.ctrlMove(t.pos)}))},n.onDestroy=function(){l.off(l.PLAYER_MOVE),l.off(l.PLAYER_TARGET_MOVE)},r}(e))||c);r._RF.pop()}}}));

System.register("chunks:///_virtual/PrefabListLoadTask.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseLoadTask.ts"],(function(e){var o,r,t,a,s,n,i;return{setters:[function(e){o=e.inheritsLoose,r=e.createForOfIteratorHelperLoose},function(e){t=e.cclegacy,a=e.resources,s=e.Prefab,n=e.error},function(e){i=e.BaseLoadTask}],execute:function(){t._RF.push({},"ec88cvEBMBJWZ6eiG0cJ+IO","PrefabListLoadTask",void 0);e("PrefabListLoadTask",function(e){function t(){return e.apply(this,arguments)||this}return o(t,e),t.prototype.doLoad=function(e,o){a.loadDir(e,s,(function(e,t){if(e)n(e);else{for(var a,s={},i=r(t);!(a=i()).done;){var c=a.value;s[c.name]=c}o(s)}}))},t}(i));t._RF.pop()}}}));

System.register("chunks:///_virtual/PrefabLoadTask.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseLoadTask.ts"],(function(o){var e,t,n,s,a;return{setters:[function(o){e=o.inheritsLoose},function(o){t=o.cclegacy,n=o.resources,s=o.Prefab},function(o){a=o.BaseLoadTask}],execute:function(){t._RF.push({},"f6958cH9BZG27+rlsWgfDvO","PrefabLoadTask",void 0);o("PrefabLoadTask",function(o){function t(){return o.apply(this,arguments)||this}return e(t,o),t.prototype.doLoad=function(o,e){n.load(o,s,(function(o,t){t&&e(t)}))},t}(a));t._RF.pop()}}}));

System.register("chunks:///_virtual/Random.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"1f0eeeF0TNI6KCbb7h+vi9u","Random",void 0),e("default",function(){function e(){}return e.prototype.setSeed=function(n){e.seed=n},e.rand=function(){return e.seed=(9301*e.seed+49297)%233280,e.seed/233280},e.getRandomNum=function(n,t){return n+Math.round(e.rand()*(t-n))},e.getHalfChance=function(){return e.rand()>.5},e}()).seed=(new Date).getTime(),n._RF.pop()}}}));

System.register("chunks:///_virtual/Random4Save.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n;return{setters:[function(e){t=e.createClass},function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"a14ed5mK8BJfpnSZ2RC2kT+","Random4Save",void 0);e("default",function(){function e(e){this.seed=0,this.seed=e,e<=0&&(e=(new Date).getTime())}var n=e.prototype;return n.rand=function(){return this.seed=(9301*this.seed+49297)%233280,this.seed/233280},n.getRandomNum=function(e,t){return e+Math.round(this.rand()*(t-e))},n.getHalfChance=function(){return this.rand()>.5},t(e,[{key:"Seed",get:function(){return this.seed},set:function(e){this.seed=e}}]),e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/RoundAnimClip.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"e9ae3z+H8BKc6vqnBrhzjqa","RoundAnimClip",void 0);t("default",function(){function t(t){this.tween=void 0,this.tween=t}return t.prototype.play=function(){var t=this;return new Promise((function(n){t.tween?t.tween.call(n).start():n()}))},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/RoundAnimManager.ts",["cc","./RoundAnimClip.ts","./GlobalConstant.ts"],(function(t){var n,o,e,a,i,u;return{setters:[function(t){n=t.cclegacy,o=t.tween,e=t.v3,a=t.UIOpacity},function(t){i=t.default},function(t){u=t.default}],execute:function(){n._RF.push({},"0a46dTuaIVLhZqglJpS1FiB","RoundAnimManager",void 0);t("default",function(){function t(){}return t.buildAttackedClip=function(t){return new i(o(t.node).to(.1,{scale:e(1.2,1.2)}).to(.2,{scale:e(1,1)}))},t.buildDiedClip=function(t){var n=t.sprite.node.getComponent(a),u=o(n).to(.2,{opacity:0}),c=o(t.node).to(.3,{scale:e(2,2)});return new i(u.parallel(c))},t.buildMoveClip=function(t,n){var a=e(n.x*u.SIZE,n.y*u.SIZE),c=o(t.node).to(.1,{position:a}),d=(n.x,t.data.pos.x,o(t.sprite.node).to(.1,{scale:e(n.x>t.data.pos.x?-1:1,1)}));return new i(d.then(c))},t.buildAttackClip=function(t,n,a){var c=e(t.data.pos.x*u.SIZE,t.data.pos.y*u.SIZE),d=e(n.x*u.SIZE,n.y*u.SIZE),l=t.data.pos.clone().subtract(n).multiplyScalar(.25),s=t.data.pos.clone().add(l),r=e(s.x*u.SIZE,s.y*u.SIZE),p=o(t.node).to(.1,{position:r}).to(.1,{position:d});a||p.then(o(t.node).to(.2,{position:c}));var f=o(t.sprite.node).to(.1,{scale:e(n.x>t.data.pos.x?-1:1,1)});return new i(f.then(p))},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/RuntimeData.ts",["cc","./DataUtils.ts"],(function(t){var n,e;return{setters:[function(t){n=t.cclegacy},function(t){e=t.default}],execute:function(){n._RF.push({},"40811EmWbhDTplRKjkJv0IY","RuntimeData",void 0);t("default",function(){function t(){this.health=0}var n=t.prototype;return n.valueCopy=function(t){t&&e.baseCopy(this,t)},n.clone=function(){var n=new t;return n.valueCopy(this),n},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/SpriteFrameListLoadTask.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseLoadTask.ts"],(function(e){var r,t,o,a,s,i,n;return{setters:[function(e){r=e.inheritsLoose,t=e.createForOfIteratorHelperLoose},function(e){o=e.cclegacy,a=e.resources,s=e.SpriteFrame,i=e.error},function(e){n=e.BaseLoadTask}],execute:function(){o._RF.push({},"857feh4OQ1O0KU7lqDvmIxP","SpriteFrameListLoadTask",void 0);e("SpriteFrameListLoadTask",function(e){function o(){return e.apply(this,arguments)||this}return r(o,e),o.prototype.doLoad=function(e,r){a.loadDir(e,s,(function(e,o){if(e)i(e);else{for(var a,s={},n=t(o);!(a=n()).done;){var u=a.value;s[u.name]=u}r(s)}}))},o}(n));o._RF.pop()}}}));

System.register("chunks:///_virtual/Test.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t,i,a,s,o,r,l,c;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,i=e._decorator,a=e.v2,s=e.Label,o=e.UITransform,r=e.log,l=e.Vec2,c=e.Component}],execute:function(){var d,u;t._RF.push({},"60327tTI+1MaIfiTVc3/qtq","Test",void 0);var h=i.ccclass;i.property,e("Test",h("Test")(((u=function(e){function t(){for(var n,t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return(n=e.call.apply(e,[this].concat(i))||this).index=a(0,0),n.label=void 0,n.labelTrans=void 0,n}n(t,e);var i=t.prototype;return i.start=function(){this.flipRight()},i.onLoad=function(){this.label=this.getComponent(s),this.labelTrans=this.label.node.getComponent(o)},i.flipRight=function(){var e=this.labelTrans.width,n=this.index.x+Math.floor(e*this.label.lineHeight/this.label.fontSize);n<t.TEXT.length&&(this.index.y=n,this.label.string=t.TEXT.substring(this.index.x,this.index.y),r(this.index),this.index.x=this.index.y+1)},i.flipLeft=function(){this.index=l.ZERO.clone()},i.update=function(e){},t}(c)).TEXT="Exploring Cultural Differences between East and West\n探索东西方文化差异\n\nIn today's globalized world, understanding cultural differences has become increasingly important. Cultural diversity not only enriches our personal lives but also plays a crucial role in business, education, and diplomacy. In this article, we will explore some of the fundamental differences between Eastern and Western cultures, focusing on communication styles, family values, and approaches to education.\n\n在当今全球化的世界中，理解文化差异变得愈发重要。文化的多样性不仅丰富了我们的个人生活，还在商业、教育和外交中起到了至关重要的作用。本文将探讨东西方文化的一些根本差异，主要关注沟通方式、家庭观念和教育理念的不同。\n\nCommunication Styles\n沟通方式\n\nOne of the most noticeable differences between Eastern and Western cultures is the way people communicate. Western cultures, particularly in the United States and Europe, tend to value direct and explicit communication. People are often encouraged to express their opinions openly, even if it means disagreeing with others. The belief is that open debate can lead to better decision-making and understanding.\n\n西方文化，特别是在美国和欧洲，往往重视直接和明确的沟通。人们通常被鼓励公开表达自己的意见，即使这意味着与他人意见相左。人们相信，公开的辩论能够带来更好的决策和理解。\n\nIn contrast, Eastern cultures, particularly in China, Japan, and Korea, often favor indirect communication. People may avoid open confrontation and instead use subtle hints or non-verbal cues to convey their feelings. This approach is rooted in the importance of maintaining harmony and avoiding conflict in social relationships.\n\n相反，东方文化，尤其是在中国、日本和韩国，通常更倾向于间接的沟通。人们可能会避免公开的对抗，而是通过细微的暗示或非语言的信号来传达他们的感受。这种方式源于保持社会关系中的和谐和避免冲突的重要性。\n\nFamily Values\n家庭观念\n\nAnother significant difference lies in family values. In many Eastern cultures, family is considered the central unit of society. Traditional values like filial piety, respect for elders, and strong family ties are deeply ingrained. Children are often expected to care for their parents as they age, and family decisions are usually made collectively.\n\n在许多东方文化中，家庭被认为是社会的核心单位。像孝顺、尊敬长辈和紧密的家庭关系等传统价值观深入人心。孩子们通常被期望在父母年老时照顾他们，家庭决策通常是集体做出的。\n\nIn contrast, Western cultures often emphasize individualism. While family is still important, there is a stronger focus on personal freedom and self-expression. Young adults in the West are more likely to move out of their parents' homes early and pursue their own careers and lives independently.\n\n相比之下，西方文化更强调个人主义。虽然家庭依然重要，但更多的是关注个人自由和自我表达。西方的年轻人更有可能在早期就搬出父母的家，独立追求自己的事业和生活。\n\nApproaches to Education\n教育理念\n\nEducation is another area where East and West differ significantly. In many Asian countries, education is often viewed as the key to success, and there is a strong emphasis on discipline, hard work, and academic achievement. Students are expected to excel in their studies, and parental involvement in education is often intense.\n\n教育是东西方差异显著的另一个领域。在许多亚洲国家，教育通常被视为成功的关键，因此对纪律、努力学习和学术成就有着极大的重视。学生被期望在学业上表现优异，家长在教育中的参与通常也非常积极。\n\nIn contrast, Western education tends to emphasize creativity, critical thinking, and problem-solving skills. While academic success is still important, there is also a focus on developing well-rounded individuals who can think independently and question the status quo. The teaching methods in the West often encourage active participation, discussion, and collaboration among students.\n\n而西方教育则更注重创造力、批判性思维和解决问题的能力。虽然学术成功仍然重要，但同时也强调培养全面发展的个体，让学生能够独立思考并质疑现状。西方的教学方法通常鼓励学生积极参与、讨论和合作。\n\nConclusion\n结论\n\nWhile there are clear differences between Eastern and Western cultures, it is important to remember that these distinctions are not rigid. Both cultures have their strengths and areas for growth. In a globalized world, learning from each other and embracing cultural diversity can lead to a more harmonious and enriched human experience.\n\n尽管东西方文化之间存在明显的差异，但我们也应当记住，这些区别并非一成不变。两种文化都有各自的优势和发展空间。在全球化的世界中，互相学习、接受文化多样性可以带来更加和谐和丰富的人类体验。\n\nUnderstanding these cultural differences can help bridge gaps and foster better communication, whether in personal relationships or in the international arena. As we continue to navigate an increasingly interconnected world, being open to different perspectives will be key to building mutual respect and cooperation.\n\n理解这些文化差异有助于弥合差距，促进更好的沟通，无论是在个人关系中还是在国际舞台上。随着我们继续在一个日益互联的世界中前行，开放不同的视角将是建立相互尊重与合作的关键。",d=u))||d);t._RF.pop()}}}));

System.register("chunks:///_virtual/Tile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GlobalConstant.ts","./Logic.ts"],(function(e){var t,i,a,o,l,r,n,s,c,u,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){l=e.cclegacy,r=e._decorator,n=e.Label,s=e.v3,c=e.Component},function(e){u=e.default},function(e){p=e.Logic}],execute:function(){var h,d,f,b,g,y,v;l._RF.push({},"ae194PozQJD/LdZI3zK+XhL","Tile",void 0);var m=r.ccclass,L=r.property;e("Tile",(h=m("Tile"),d=L(n),f=L(n),h((y=t((g=function(e){function t(){for(var t,i=arguments.length,l=new Array(i),r=0;r<i;r++)l[r]=arguments[r];return(t=e.call.apply(e,[this].concat(l))||this).gameWorld=void 0,a(t,"label",y,o(t)),a(t,"label1",v,o(t)),t.pos=void 0,t}i(t,e);var l=t.prototype;return l.onLoad=function(){},l.start=function(){},l.update=function(e){p.isGamePause||(this.label.node.active=!1,this.label1.node.active=this.gameWorld.player&&this.pos.equals(this.gameWorld.player.data.pos),this.gameWorld.player&&(this.label1.string=""+this.gameWorld.player.data.runtime.health))},l.init=function(e,t){this.pos=t,this.gameWorld=e;var i=s(this.pos.x*u.SIZE,this.pos.y*u.SIZE);return this.node.setPosition(i),i},t}(c)).prototype,"label",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=t(g.prototype,"label1",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=g))||b));l._RF.pop()}}}));

System.register("chunks:///_virtual/TileBg.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TransformComponent.ts","./GlobalConstant.ts","./AnimSprite.ts","./AnimSpriteData.ts","./EventHelper.ts"],(function(t){var e,n,i,o,r,s,a,c,l,p,u,d;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){i=t.cclegacy,o=t._decorator,r=t.Node,s=t.v3,a=t.Sprite},function(t){c=t.TransformComponent},function(t){l=t.default},function(t){p=t.AnimSprite},function(t){u=t.default},function(t){d=t.EventHelper}],execute:function(){var f;i._RF.push({},"27f0ey5WzRDZJQZ6NITzoKd","TileBg",void 0);var h=o.ccclass;o.property,t("TileBg",h("TileBg")(f=function(t){function i(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))||this).animSprite=void 0,e._sprite=void 0,e.gameWorld=void 0,e}e(i,t);var o=i.prototype;return o.onLoad=function(){var t=this;this.node.on(r.EventType.TOUCH_START,(function(e){var n=e.getLocation(),i=s(n.x,n.y),o=(i=t.gameWorld.cameraController.camera.screenToWorld(i)).subtract(t.node.worldPosition.clone()),r=Math.floor(o.x/l.SIZE),a=Math.floor(o.y/l.SIZE);o=s(r,a),d.emit(d.PLAYER_TARGET_MOVE,{pos:o})}),this)},o.init=function(t,e){this.gameWorld=t,this.animSprite=this.sprite.addComponent(p),this.animSprite.init(new u(l.SIZE*t.data.size.x,l.SIZE*t.data.size.y,e,!0),!0),this.node.setPosition(s(-l.SIZE/2,-l.SIZE/2))},n(i,[{key:"sprite",get:function(){return this._sprite||(this._sprite=this.node.getComponent(a)),this._sprite}}]),i}(c))||f);i._RF.pop()}}}));

System.register("chunks:///_virtual/TileData.ts",["cc","./DataUtils.ts"],(function(t){var e,n,o,i;return{setters:[function(t){e=t.cclegacy,n=t.v3,o=t.Vec3},function(t){i=t.default}],execute:function(){e._RF.push({},"b5265bi4nZGerAp9e7IMiJl","TileData",void 0);t("default",function(){function t(){this.pos=o.ZERO}var e=t.prototype;return e.valueCopy=function(t){t&&(i.baseCopy(this,t),this.pos=t.pos?n(t.pos.x,t.pos.y):o.ZERO)},e.clone=function(){var e=new t;return e.valueCopy(this),e},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/TimeCheck.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"9dbacsmsfxOTrs1D6JUP/v3","TimeCheck",void 0);t("default",function(){function t(t){this.interval=.016,this.timeDelay=0,this.interval=t}return t.prototype.isTimeDelay=function(t){return this.timeDelay+=t,this.timeDelay>this.interval&&(this.timeDelay=0,!0)},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/TransformComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var r,t,o,e,s,a;return{setters:[function(n){r=n.inheritsLoose,t=n.createClass},function(n){o=n.cclegacy,e=n._decorator,s=n.UITransform,a=n.Component}],execute:function(){var c;o._RF.push({},"2d73ewR7dpGkboATaTYvF3s","TransformComponent",void 0);var i=e.ccclass;n("TransformComponent",i("TransformComponent")(c=function(n){function o(){for(var r,t=arguments.length,o=new Array(t),e=0;e<t;e++)o[e]=arguments[e];return(r=n.call.apply(n,[this].concat(o))||this)._transform=void 0,r}return r(o,n),t(o,[{key:"trans",get:function(){return this._transform||(this._transform=this.getComponent(s)),this._transform}}]),o}(a))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/UiFinish.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameController.ts","./Logic.ts"],(function(t){var e,n,i,o,r,l,a,s,c,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,l=t._decorator,a=t.Label,s=t.Component},function(t){c=t.GameController},function(t){u=t.Logic}],execute:function(){var p,h,f,g,m;r._RF.push({},"6459aPkx3RBcrfosDB572/L","UiFinish",void 0);var d=l.ccclass,v=l.property;t("UiFinish",(p=d("UiFinish"),h=v(a),p((m=e((g=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r))||this,i(e,"titleLabel",m,o(e)),e.gameController=void 0,e}n(e,t);var r=e.prototype;return r.start=function(){this.gameController=this.node.parent.getComponent(c),this.titleLabel.string="到达回合："+u.roundCount},r.update=function(t){},r.retryButtonEvent=function(){this.gameController.showLoadingUi()},r.homeButtonEvent=function(){this.gameController.showStartUi()},e}(s)).prototype,"titleLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=g))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/UiGame.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameController.ts","./GameWorld.ts","./Logic.ts","./TimeCheck.ts"],(function(e){var t,n,r,o,i,a,l,c,u,s,m,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,l=e.Label,c=e.Component},function(e){u=e.GameController},function(e){s=e.GameWorld},function(e){m=e.Logic},function(e){p=e.default}],execute:function(){var h,d,f,g,C,b,y;i._RF.push({},"ecebdypJxxAVp+EJQw8/w4z","UiGame",void 0);var v=a.ccclass,G=a.property;e("UiGame",(h=v("UiGame"),d=G(s),f=G(l),h((b=t((C=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))||this).gameController=void 0,r(t,"gameWorld",b,o(t)),r(t,"roundLabel",y,o(t)),t.timeCheck=new p(1),t}n(t,e);var i=t.prototype;return i.onEnable=function(){this.gameController=this.node.parent.getComponent(u),this.gameWorld.init(this.gameController,this.gameController.cameraController)},i.update=function(e){this.timeCheck.isTimeDelay(e)&&(this.roundLabel.string=""+m.roundCount)},i.startButtonEvent=function(){this.gameWorld.clear(),this.gameController.showFinishUi()},t}(c)).prototype,"gameWorld",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(C.prototype,"roundLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=C))||g));i._RF.pop()}}}));

System.register("chunks:///_virtual/UiLoading.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameController.ts","./AtlasLoadTask.ts","./Logic.ts"],(function(o){var n,t,a,e,r,i,c;return{setters:[function(o){n=o.inheritsLoose},function(o){t=o.cclegacy,a=o._decorator,e=o.Component},function(o){r=o.GameController},function(o){i=o.AtlasLoadTask},function(o){c=o.Logic}],execute:function(){var l;t._RF.push({},"e29b3Pg44ZD+of040/6wWUF","UiLoading",void 0);var s=a.ccclass;a.property,o("UiLoading",s("UiLoading")(l=function(o){function t(){for(var n,t=arguments.length,a=new Array(t),e=0;e<t;e++)a[e]=arguments[e];return(n=o.call.apply(o,[this].concat(a))||this).atlasLoadTask=new i,n.gameController=void 0,n}n(t,o);var a=t.prototype;return a.start=function(){this.gameController=this.node.parent.getComponent(r)},a.onEnable=function(){var o=this;c.loadingManager.load((function(){o.gameController.showGameUi()}))},a.update=function(o){c.loadingManager.updateLogic(o)},t}(e))||l);t._RF.pop()}}}));

System.register("chunks:///_virtual/UiStart.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameController.ts"],(function(t){var n,o,r,e,a;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,r=t._decorator,e=t.Component},function(t){a=t.GameController}],execute:function(){var i;o._RF.push({},"7f75a0d+gRKkoyOT3nfQgMa","UiStart",void 0);var c=r.ccclass;r.property,t("UiStart",c("UiStart")(i=function(t){function o(){for(var n,o=arguments.length,r=new Array(o),e=0;e<o;e++)r[e]=arguments[e];return(n=t.call.apply(t,[this].concat(r))||this).gameController=void 0,n}n(o,t);var r=o.prototype;return r.start=function(){this.gameController=this.node.parent.getComponent(a)},r.update=function(t){},r.startButtonEvent=function(){this.gameController.showLoadingUi()},o}(e))||i);o._RF.pop()}}}));

System.register("chunks:///_virtual/Utils.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,n;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy,n=e.log}],execute:function(){r._RF.push({},"3e558dY+rtKwpRP1UuwFNgG","Utils",void 0),e("default",function(){function e(){}return e.log=function(e){this.showLog&&n(e)},e.clearComponentArray=function(r){for(var n,u=t(r);!(n=u()).done;){var o=n.value;e.clearComponent(o)}},e.clearComponent=function(e){e&&e.isValid&&e.destroy()},e.getPlayTime=function(t){var r=Math.floor(t/36e5),n=Math.floor((t-36e5*r)/6e4),u=Math.floor((t-36e5*r-6e4*n)/1e3);return e.getNumberStr2(r)+":"+e.getNumberStr2(n)+":"+e.getNumberStr2(u)},e.getFullFormatTime=function(t){var r=new Date(t),n=r.getFullYear(),u=r.getMonth()+1,o=r.getDate(),a=r.getHours()+1;a>23&&(a=0);var g=r.getMinutes(),c=r.getSeconds();return e.getNumberStr2(n)+"/"+e.getNumberStr2(u)+"/"+e.getNumberStr2(o)+" "+e.getNumberStr2(a)+":"+e.getNumberStr2(g)+":"+e.getNumberStr2(c)},e.getDay=function(e){var t=new Date(e),r=t.getMonth()+1,n=t.getDate();return(r<10?"0":"")+r+"月"+(n<10?"0":"")+n+"日 "+this.getWeek(t)},e.getHour=function(e){var t=new Date(e),r=t.getHours()+1;r>23&&(r=0);var n=t.getMinutes();return(r<10?"0":"")+r+":"+(n<10?"0":"")+n},e.getYear=function(e){return new Date(e).getFullYear()+"年"},e.getWeek=function(e){var t="";return 0==e.getDay()&&(t="星期日"),1==e.getDay()&&(t="星期一"),2==e.getDay()&&(t="星期二"),3==e.getDay()&&(t="星期三"),4==e.getDay()&&(t="星期四"),5==e.getDay()&&(t="星期五"),6==e.getDay()&&(t="星期六"),t},e.clamp=function(e,t,r){return e>t?t:e<r?r:e},e.clampPos=function(e,t,r){var n=e.clone();return e.x>t.x&&(n.x=t.x),e.y>t.y&&(n.y=t.y),e.x<r.x&&(n.x=r.x),e.y<r.y&&(n.y=r.y),n},e.isFirstEqual=function(e,t){return!!e&&e[0]==t},e.hasThe=function(e,t){return!!e&&-1!=e.indexOf(t)},e.getNumberStr3=function(e){return e<10?"00"+e:e<100?"0"+e:""+e},e.getNumberStr2=function(e){return e<10?"0"+e:""+e},e.scheduleOnce=function(e,t){return new Promise((function(r){e.scheduleOnce((function(){r(!0)}),t||0)}))},e}()).showLog=!0,r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});